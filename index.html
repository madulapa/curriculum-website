<!DOCTYPE html>
<html>

<head>

    <title> Stemnova Climate Change Curriculum </title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <style>
        body {
            font-family: 'Noto Sans', sans-serif;
            margin: 0;
        }

        * {
            box-sizing: border-box;
        }

        h3 {
            font-weight: bolder;
        }

        h1 {
            font-size: 3.5em;
        }

        #header {
            background-color: #1A67C1;
            color: white;
            height: 700px;
            width: 100%;
            padding: 20px;
            text-align: center;
            background-image: url(./images/blurred-header.jpg);
            background-size: 100% 150%;

        }

        #header img {
            height: 500px;
            padding-top: 100px;
        }

        #description {
            background-color: #FDBF12;
            height: 100%;
            padding-left: 80px;
            padding-right: 80px;
            text-align: center;
            padding-top: 30px;
            font-size: larger;
        }

        #results {
            transform: translateY(20%);

        }

        .cols {
            float: left;
            width: 50%;
        }

        .content {
            margin: 50px 100px;
        }

        .progress {
            height: 60px;

        }

        .progress-bar {
            color: black;
            font-size: 1.5em;
        }

        #submit {
            background-color: #1D2366;
            color: white;
            padding: 7px;
            padding-left: 10px;
            padding-right: 10px;
        }

        #title {
            margin-right: auto;
            margin-left: auto;
        }

        #key {
            font-weight: 900;
            border-style: solid;
            border-color: #1D2366;
            padding: 20px;
            text-align: center;
            margin: 50px;
        }
    </style>

</head>

<body>
    <div id="header" class="container-fluid">

        <img src="./images/logo.png" alt="logo">
    </div>
    <!--header-->
    <div id="description" class="row">
        <div class="col-xs-12 center-block text-center">
            <h2><b>Our Program </b></h2>
            <br>
            <p>Welcome to the Exploring Climate Change City Tracker! This is the place you and your group will go to for
                keeping track of all the amazing changes you’re implementing in your city! A few things to remember: use
                the
                Inventory Sheet to decide which changes you’re investing in, and how drastic those changes will be.
                Also,
                keep in mind your budget and carbon emissions limitations. Remember, Cityville citizens are trusting you
                to
                turn their city into a sustainable, accessible, and environmentally-friendly home! As you enter your
                changes
                into this tracker, pay special attention to the units of each item! Now, have fun and make some changes!
            </p>
            <br>
        </div>
    </div>
    <!--description-->
    <div class="row content">
        <div id="inventory" class="col-sm-12 col-lg-6">
            <h2><b>Inventory</b></h2>
            <p>*Please do not leave any input empty, use 0 if the value is 0</p>
            <p>**Minimum value that can be entered other than 0 is 20% of the maximum energy output</p>
            <form id="inputs" onsubmit="calculateCommRating() & calculateBudget() & calculateCO2()">
                <br>
                <h5><b>Energy Items (input in KWh)</b></h5>
                <label for="coalPlant">Coal Plants:</label>
                <input type="number" name="coalPlant" value=0><br>
                <label for="oilPlant">Oil Plants:</label>
                <input type="number" name="oilPlant" value=0><br>
                <label for="naturalGasPlant">Natural Gas Plants:</label>
                <input type="number" name="naturalGasPlant" value=0><br>
                <label for="nuclearPlant">Nuclear Plants:</label>
                <input type="number" name="nuclearPlant" value=0><br>
                <label for="solarFarm">Solar Farms:</label>
                <input type="number" name="solarFarm" value=0><br>
                <label for="windTurbine">Wind Turbines:</label>
                <input type="number" id="windTurbine" name="windTurbine" value=0><br>
                <label for="geothermalEnergyPlant">Geothermal Energy Plants:</label>
                <input type="number" id="geothermalEnergyPlant" name="geothermalEnergyPlant" value=0><br>
                <label for="hydropowerPlant">Hydropower Plants:</label>
                <input type="number" id="hydropowerPlant" name="hydropowerPlant" value=0><br>
                <label for="solarPanel">Solar Panels:</label>
                <input type="number" id="solarPanel" name="solarPanel" value=0><br>
                <br>
                <h5><b>Waste Management Items (input by quantity)</b></h5>
                <label for="recyclingPlant">Recycling Plants:</label>
                <input type="number" id="recyclingPlant" name="recyclingPlant" value=0><br>
                <label for="sanitaryLandfill">Sanitary Landfills:</label>
                <input type="number" id="sanitaryLandfill" name="sanitaryLandfill" value=0><br>
                <label for="incinerationPlant">Incineration Plants:</label>
                <input type="number" id="incinerationPlant" name="incinerationPlant" value=0><br>
                <label for="compostingPlant">Composting Plants:</label>
                <input type="number" id="compostingPlant" name="compostingPlant" value=0><br>
                <label for="resourceRecoveryPlant">Resource Recovery Plants:</label>
                <input type="number" id="resourceRecoveryPlant" name="resourceRecoveryPlant" value=0><br>
                <br>
                <h5><b>Transportation Items (input by quantity)</b></h5>
                <label for="busStops">Bus Stops:</label>
                <input type="number" id="busStops" name="busStops" value=0><br>
                <label for="bicycleLanes">Bicycle Lanes:</label>
                <input type="number" id="bicycleLanes" name="bicycleLanes" value=0 max=1><br>
                <label for="metroOrSubways">Metro/Subways:</label>
                <input type="number" id="metroOrSubways" name="metroOrSubways" value=0 max=1><br>
                <label for="roads">Roads:</label>
                <input type="number" id="roads" name="roads" value=0><br>
                <input id="submit" type="submit" value="Submit">
            </form>
        </div>
        <!--inventory-->

        <!--<div class="col-2 total-val">
            <span id="total_value">0</span>
            <span id="total_budget">0</span>
          </div>-->

        <div id="results" class="col-sm-12 col-lg-6">
            <h4>Carbon Emissions:</h4>
            <div class="progress">
                <div class="progress-bar bg-warning progress-bar-striped progress-bar-animated" id="carbonEmissions"
                    role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                    7,727,280,000 lbs of C
                </div>
            </div>
            <!--carbonEmissions-->
            <br><br>
            <h4>Community Rating:</h4>
            <div class="progress">
                <div class="progress-bar progress-bar-striped progress-bar-animated" id="communityRating"
                    role="progressbar" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100" style="width:50%">
                    50 points
                </div>
            </div>
            <!--communityRating-->
            <br><br>
            <h4>Budget:</h4>
            <div class="progress" id="budget">
                <div id="energy" class="progress-bar bg-success progress-bar-striped progress-bar-animated"
                    role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width:10%">
                   
                </div>
                <div id="waste" class="progress-bar bg-info progress-bar-striped progress-bar-animated"
                    role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width:10%">
                    
                </div>
                <div id="transpo" class="progress-bar bg-danger progress-bar-striped progress-bar-animated"
                    role="progressbar" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" style="width:10%">
                    
                </div>
            </div>
            <!--budget-->
            <div id="key">
                <p>
                    Energy:
                    <span id="energyValue" class="text-success">$0</span>
                </p>
                <p>
                    Waste:
                    <span id="wasteValue" class="text-info">$0</span>
                </p>
                <p>
                    Transportation:
                    <span id="transpoValue" class="text-danger">$0</span>
                </p>
            </div>
            <!--key-->
        </div>
        <!--results-->

    </div>
    <!--container-->
    
</body>
<script>
    function calculateCommRating() {
        var inputs = document.getElementById("inputs").elements;
        var total = 50;
        var numPlants = 0;
        var ratingVals = [-2, -1, -2, -1, 4, 4, 2, 5, 3, 5, -5, -4, 5, 2, 4, 2, 5, 1];
        //var maxEnergyVals = [3500000000, 66000000, 580000000,5000000000, 1460000, 6000000, 420000000, 2000000000];
        var minEnergyVals = [700000000, 13200000, 1160000000, 1000000000, 292000, 1200000, 840000000, 400000000];

        for (i = 0; i < inputs.length - 1; i++) {

            if (i <= 7) {
                numPlants = inputs[i].value / minEnergyVals[i];
                console.log("num plants", numPlants);
                if (numPlants <= 0)
                    continue;
                else
                    total += parseInt(numPlants) * ratingVals[i];
            }
            else
                total += parseInt(inputs[i].value) * ratingVals[i];


        }
        if (total > 100) total = 100;
        event.preventDefault();
        $('#communityRating').width(total + "%").attr('aria-valuenow', total);
        $('#communityRating').text(total.toString() + " points");
    }

    function calculateBudget() {
        var inputs = document.getElementById("inputs").elements;
    
        var total = 1190000000;
        var energy = 0;
        var waste = 0;
        var transpo = 0;
        var costs = [0.03, 0.21, 0.05, 0.02, 0.06, 0.05, 0.05, 0.01, 12000, 9000000, 84000000, 150000000, 5000000, 40000000, 10000, 80000, 600000000, 4000000];
        for (let i = 0; i < inputs.length - 1; i++) {
            if (i < 9) {
                energy += parseFloat(inputs[i].value) * costs[i];
            }
            else if (i < 14) {
                waste += parseFloat(inputs[i].value) * costs[i];
            }
            else if (i < 18) {
                transpo += parseFloat(inputs[i].value) * costs[i];
            }
            total -= parseFloat(inputs[i].value) * costs[i];


        }
        if (total < 0) {
            alert("You are above your budget, make some changes!");
        }
        //have to scale down total bc width is only out of 100
        var energyWidth = energy / 1190000000 * 100;
        var wasteWidth = waste / 1190000000 * 100;
        var transpoWidth = transpo / 1190000000 * 100;

        event.preventDefault();
        $("#total_budget").text(total);

        $('#energy').width(energyWidth + "%").attr('aria-valuenow', energyWidth);
        $('#energy').text("$" + energy.toString());
        $('#energyValue').text("$" + energy.toLocaleString('en-US').toString());

        $('#waste').width(wasteWidth + "%").attr('aria-valuenow', wasteWidth);
        $('#waste').text("$" + waste.toString());
        $('#wasteValue').text("$" + waste.toLocaleString('en-US').toString());

        $('#transpo').width(transpoWidth + "%").attr('aria-valuenow', transpoWidth);
        $('#transpo').text("$" + transpo.toString());
        $('#transpoValue').text("$" + transpo.toLocaleString('en-US').toString());
    }

    function calculateCO2() {
        var inputs = document.getElementById("inputs").elements;
        //0 - 8 == energy
        //9 - 13 = waste
        // 14 - 17 = transpo
        //------WASTE
        /*
        starting CO2 emissions for waste is 450,000,000 * num sanitary landfills
        for every recycle plant cut it by 1/4
        for every incineration plant cut it by 3/20
        for every composting plant cut it by 3/10
        for every RRP cut it by 1/10
        */
        //------TRANSPO
        /*
        for every bust stop decrease by 1/3
        for every bicycle lane decrease by 1/10
        for every metro decrease by 1/2
        
        */

        var ghg = [1.8, 1.9, 1.0, 0.02, 0.10, 0.02, 0.08, 0.05, 0.08, 0.75, 450000000, 0.85, 0.7, 0.9, 0.67, 0.9, 0.5];
        var wasteEmissions = inputs[10].value * ghg[10];
        
        var totalEmissionsWithoutWaste = 7727280000 - wasteEmissions;
        
        for (let i = 0; i < inputs.length - 1; i++) {
            //energy    
            if (i <= 8) {
                totalEmissionsWithoutWaste += inputs[i].value * ghg[i];
            }
            //waste
            else if (i > 9 && i <= 13) {
                if (i == 10)
                    continue;
                else {
                    var num = inputs[i].value;
                    
                    while (num > 0) {
                        wasteEmissions *= ghg[i];
                        num--;
                    }
                }
            }
            else if (i > 13 && i < 17) {
                var num = inputs[i].value;
                while (num > 0) {
                    totalEmissionsWithoutWaste *= ghg[i];
                    num--;
                }
            }

        }
        var total = wasteEmissions + totalEmissionsWithoutWaste;
    //console.log("total waste: ", totalEmissionsWithoutWaste);
        var totalPercent = parseInt((total / 7727280000) * 100);


        event.preventDefault();
        $('#carbonEmissions').width(totalPercent + "%").attr('aria-valuenow', totalPercent);
        $('#carbonEmissions').text(total.toLocaleString('en-US').toString() + " lbs of C");

    }

    function CommaFormatted(amount) {
        var delimiter = ","; // replace comma if desired
        var a = amount.split('.', 2)
        var d = a[1];
        var i = parseInt(a[0]);
        if (isNaN(i)) { return ''; }
        var minus = '';
        if (i < 0) { minus = '-'; }
        i = Math.abs(i);
        var n = new String(i);
        var a = [];
        while (n.length > 3) {
            var nn = n.substr(n.length - 3);
            a.unshift(nn);
            n = n.substr(0, n.length - 3);
        }
        if (n.length > 0) { a.unshift(n); }
        n = a.join(delimiter);
        if (d.length < 1) { amount = n; }
        else { amount = n + '.' + d; }
        amount = minus + amount;
        return amount;
    }
</script>

</html>